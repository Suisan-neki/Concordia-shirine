# Concordia Shrine v2 - TODO

## Phase 1: バックエンド連携
- [x] web-db-userへのアップグレード
- [x] セッションデータのスキーマ定義
- [x] セッション保存APIの実装
- [x] セッション履歴取得APIの実装
- [x] フロントエンドとバックエンドの連携

## Phase 2: 介入機能
- [x] 介入トリガーの検出ロジック
- [x] 通知音の実装
- [x] 画面上のヒント表示コンポーネント
- [x] 介入設定のカスタマイズUI

## Phase 3: レポート出力機能
- [x] レポートデータの集計ロジック
- [x] HTML/Markdownレポート生成機能の実装
- [x] レポートダウンロードUI


## Phase 4: 「気づかないうちに守られている」セキュリティ機能

### バックエンドセキュリティ
- [x] セッションデータの暗号化（AES-256-GCM）
- [x] APIレート制限の実装
- [x] 監査ログ（セキュリティイベント記録）
- [x] 入力サニタイズの強化
- [x] CSRF保護（テンプレートに組み込み済み）

### 発見できる詳細モード
- [x] セキュリティダッシュボードの詳細モード
- [x] 「裏で動いていた」ログの表示
- [ ] セッション終了時のセキュリティサマリー

### 物語としての説明
- [x] Aboutページの作成
- [x] READMEの更新（技術と物語の融合）


## Phase 5: パフォーマンス最適化

### データベース最適化
- [x] クエリ結果のキャッシュ（ユーザー、セッション、設定）
- [x] データ保持期間の設定（30日で自動削除）
- [x] キャッシュ無効化の実装

### API呼び出し最適化
- [x] キャッシュの実装（TTL: 1分～5分）
- [x] バッチ処理の導入（ログのバッファリング）
- [x] サンプリングによるログ削減（infoレベルは10%のみ）

### ストレージ最適化
- [x] 古いデータの自動削除（30日以上前）
- [x] ローカルストレージの活用（IndexedDBは既存）
- [x] メモリバッファによるDB書き込み削減
